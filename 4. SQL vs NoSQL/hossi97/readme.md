# SQL vs NoSQL

## 1. SQL 과 NoSQL

### 1-1. SQL 이란?

> SQL 은 일반적으로 관계형 DB 를 의미한다.

-   데이터는 정해진 데이터 `스키마`에 따라 테이블에 저장
-   데이터는 `관계`에 따라 여러 테이블에 분산

SQL 에 대해서는 비교적 잘 알고 있을테니 NoSQL 에 집중해 내용을 정리해보도록 하겠다.

## 1-2. NoSQL 이란?

> NoSQL 은 비관계형 DB 를 의미한다.

SQL 과의 가장 큰 차이점은 `스키마`와 `관계`에 따른 규칙이 없다.

-   NoSQL 에서는 튜플 / 레코드를 문서(document)라고 한다.
-   문서(document) 는 JSON 과 비슷한 형태를 띈다.
-   관련된 데이터를 동일한 컬렉션(collection) 에 넣는다.

즉, 다른 구조의 데이터를 같은 컬렉션에 추가가 가능하다.

예를 들어, SQL 에서 주문 데이터베이스를 구성할 때를 생각해보다.

일반적으로 Users, Orders, Products 테이블을 따로 두고, FK 로 관계를 맺고, Join 으로 필요한 데이터를 조회한다.

하지만 NoSQL 에서는 Orders 에 모든 데이터를 한번에 저장한다.
(Join 이라는 개념이 없다.)

### 1-3. NoSQL 에서 Join 을 한다면?

> 컬렉션을 통해 데이터를 복제해 각 컬렉션 일부분에 속하는 데이터를 정확하게 산출

데이터가 중복돼 서로 영향을 줄 위험이 있으므로 Join 을 잘 사용하지 않는다.

따라서 자주 변경되지 않는 데이터를 다룰 때 NoSQL 을 사용하면 효율적이다.

## 2. 데이터베이스 서버의 확장

-   수직적 확장: 데이터베이스 서버의 성능을 향상시키는 것
-   수평적 확장: 더 많은 서버가 추가되고, 데이터베이스가 분산되는 것 -> 하나의 서버에 여러 호스트

기본적으로 SQL 에서는 수직적 확장만 지원하고, NoSQL 은 모두 지원한다.

## 3. 장단점 비교

### 3-1. SQL 장단점

**SQL 장점**

-   명확하게 정의된 스키마로 데이터 무결성(정확성, 일관성, 유효성) 보장
-   관계는 각 데이터를 중복없이 한번만 저장

**SQL 단점**

-   떨어지는 유연성으로 관계 수정이 힘듦
-   관계를 맺고 있어서 조인문이 많은 복잡한 쿼리문과 수직적 확장만 가능함

### 3-2. NoSQL 장단점

**NoSQL 장점**

-   높은 유연성으로 저장된 데이터를 조정하고 새로운 필드 추가 가능
-   애플리케이션이 필요로 하는 형식으로 데이터 저장 -> 데이터 읽는 속도 빠름
-   수직 / 수평 확장이 가능 -> 애플리케이션이 발생시키는 모든 읽기 / 쓰기 요청 처리 가능

**NoSQL 단점**

-   유연성으로 인해 데이터 구조 결정이 어려움
-   데이터 중복에 대해 지속적인 업데이트 필요
-   데이터가 여러 컬렉션에 중복되어 있기 때문에 수정 시 모든 컬렉션에서 수정

## 4. 상황에 따른 선택

### 4-1. SQL 데이터베이스 사용이 더 좋을 때

-   관계를 맺고 있는 데이터가 자주 변경되는 애플리케이션
-   구조가 변경될 여지가 없고, 명확한 스키마가 사용자와 데이터에게 중요한 경우

### 4-2. NoSQL 데이터베이스 사용이 더 좋을 때

-   정확한 데이터 구조를 알 수 없거나 변경/확장 될 수 있는 경우
-   읽기를 자주 하지만, 데이터 변경은 자주 없는 경우
-   데이터베이스를 수평으로 확장해야 하는 경우 -> 막대한 양의 데이터를 다뤄야 하는 경우

## 5. 결론

> 정답은 없다. 상황에 따라 적합한 것을 선택하자

-   SQL을 선택해 복잡한 JOIN문을 지양하도록 설계해 단점을 없앨 수도
-   NoSQL을 선택해 중복 데이터를 지양하도록 설계해 단점을 없앨 수도
